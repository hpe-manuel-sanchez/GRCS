/// <reference path="/GCS/Scripts/Custom/RightsReviewWorkqueue/RightsReviewWorkqueue.js" />
/// <reference path="/GCS/Scripts/Custom/LayoutRoot.js" />
/// <reference path="/GCS/Scripts/Custom/RightsReviewWorkqueue/SecondaryExploitationTab.js" />

var multi_Artist_Compilations, synchronisation, midPrice, budget, premiums, sampleUse, advertRoyaltyBreaks, clubMailOrder, remixEdit, greatestHits, kiosk, jsonObject, secondaryPopupMessages , reviewStatus;
var rightsMulti_Artist_Compilations, rightsSynchronisation, rightsMidPrice, rightsBudget, rightsPremiums, rightssample_Use, rightsAdvert_Royalty_Breaks, rightsClub_Mail_Order,
        rightsRemix_Edit, rightsGreatest_Hits, rightsKiosk;

var secondaryGridName = $('#hdnGridId').val();
var gridObjSecondary = $find(secondaryGridName);
var noChangeRequired = "No Change Required";
var waterMark = "No Change Required";

$(document).ready(function () {
    $("#" + secondaryGridName + "waiting_WaitingPopup").hide();
    secondaryPopupMessages = secondaryExploitationMessages;
    restrictedDropDownValidation();

    $('.HoldBack').blur(function () {
        if ($(this).val().length == 0)
            $(this).val(waterMark).addClass('watermark');
    }).focus(function () {
        if ($(this).val() == waterMark)
            $(this).val('').removeClass('watermark');
    }).val(waterMark).addClass('watermark');

});


$('.HoldBack').blur(function () {
    if ($(this).val().length == 0)
        $(this).val(waterMark).addClass('watermark');
}).focus(function () {
    if ($(this).val() == waterMark)
        $(this).val('').removeClass('watermark');
}).val(waterMark).addClass('watermark');

$('.Notes').blur(function () {
    if ($(this).val().length == 0)
        $(this).val(waterMark).addClass('watermark');
}).focus(function () {
    if ($(this).val() == waterMark)
        $(this).val('').removeClass('watermark');
}).val(waterMark).addClass('watermark');

$("select.restrictedList").val("111");

/* Apply all Click function */

$('#applyRestrictionBulk').click(function (e) {
    e.preventDefault();
    $('#divWarning').hide();
    $("select.restrictionList").each(function () {
        var temp = $($("select.restrictedList")[$("select.restrictionList").index(this) + 1]).val();
        if (temp == 1) {
            $($("select.restrictionList")[$("select.restrictionList").index(this) + 1]).val($($("select.restrictionList")[$("select.restrictionList").index(0)]).val());

            $('select.restrictionList').each(function () {
                var tempVal = $(this).val();

                if (tempVal == 0 || tempVal == 111) {
                    $($("select.consentList")[$("select.restrictionList").index(this)]).val(111);
                    $($("select.consentList")[$("select.restrictionList").index(this)]).attr("disabled", true);
                    $($("input.HoldBack")[$("select.restrictionList").index(this)]).val(waterMark);
                    $($("input.HoldBack")[$("select.restrictionList").index(this)]).attr("disabled", true);
                  
                }
                else if (tempVal == 1 || tempVal == 3 || tempVal == 4) {
                    $($("select.consentList")[$("select.restrictionList").index(this)]).val(0);
                    $($("select.consentList")[$("select.restrictionList").index(this)]).attr("disabled", true);
                    $($("input.HoldBack")[$("select.restrictionList").index(this)]).val("");
                    $($("input.HoldBack")[$("select.restrictionList").index(this)]).attr("disabled", true);
                }
                else {
                    $($("select.consentList")[$("select.restrictionList").index(this)]).val(111);
                    $($("select.consentList")[$("select.restrictionList").index(this)]).attr("disabled", false);
                    $($("input.HoldBack")[$("select.restrictionList").index(this)]).val("No Change Required");
                    $($("input.HoldBack")[$("select.restrictionList").index(this)]).attr("disabled", false);
                }
            });
        }
    });
});

$('#applyRestrictedBulk').click(function (e) {
    e.preventDefault();
    $('#divWarning').hide();
    restrictedDropDownValidation();
});


$('#applyConsentBulk').click(function (e) {
    $('#divWarning').hide();
    e.preventDefault();
    $("select.consentList").each(function () {
        var temp = $($("select.restrictedList")[$("select.consentList").index(this) + 1]).val();
        var tempvalid = $($("select.restrictionList")[$("select.consentList").index(this) + 1]).val();
        if (temp == 1 && (tempvalid == 5 || tempvalid == 2 || tempvalid == 0 || tempvalid == 111)) {
            $($("select.consentList")[$("select.consentList").index(this) + 1]).val($($("select.consentList")[$("select.consentList").index(0)]).val());
            $($("select.consentList")[$("select.consentList").index(this) + 1]).removeClass('watermark');
        }
    });

});


$('#applyHoldBackBulk').click(function (e) {
    e.preventDefault();
    $('#divWarning').hide();
    $("input.HoldBack").each(function () {
        var temp = $($("select.restrictedList")[$("input.HoldBack").index(this) + 1]).val();
        if (temp == 1 && !$($("select.consentList")[$("input.HoldBack").index(this) + 1]).is(':disabled'))
        $($("input.HoldBack")[$("input.HoldBack").index(this) + 1]).val($($("input.HoldBack")[$("input.HoldBack").index(0)]).val());
        if($($("input.HoldBack")[$("input.HoldBack").index(0)]).val() != "No Change Required")
        $($("input.HoldBack")[$("input.HoldBack").index(this) + 1]).removeClass('watermark');
    });
});


$('#applyNotesBulk').click(function (e) {
    e.preventDefault();
    $('#divWarning').hide();
    $("input.Notes").each(function () {
        $($("input.Notes")[$("input.Notes").index(this) + 1]).val($(this).val());
        if($(this).val()!="No Change Required")
        $($("input.Notes")[$("input.Notes").index(this) + 1]).removeClass('watermark');
    });
});


/* Apply all Click function ends*/


/*Restriction list dropdown validation functionality starts*/

$('select.restrictionList').change(function () {
    $('#divWarning').hide();
    var temp = $(this).val();
    if (temp == 1 || temp == 3 || temp == 4) {
        $($("select.consentList")[$("select.restrictionList").index(this)]).val(0);
        $($("select.consentList")[$("select.restrictionList").index(this)]).attr("disabled", true);
        $($("input.HoldBack")[$("select.restrictionList").index(this)]).val("");
        $($("input.HoldBack")[$("select.restrictionList").index(this)]).attr("disabled", true);
    }
    else if (temp == 111) {
        $($("select.consentList")[$("select.restrictionList").index(this)]).val(111);
        $($("select.consentList")[$("select.restrictionList").index(this)]).attr("disabled", true);
        $($("input.HoldBack")[$("select.restrictionList").index(this)]).val("No Change Required");
        $($("input.HoldBack")[$("select.restrictionList").index(this)]).attr("disabled", true);
    }
    else {
        $($("select.consentList")[$("select.restrictionList").index(this)]).val(111);
        $($("select.consentList")[$("select.restrictionList").index(this)]).attr("disabled", false);
        $($("input.HoldBack")[$("select.restrictionList").index(this)]).attr("disabled", false);
        $($("input.HoldBack")[$("select.restrictionList").index(this)]).blur(function () {
            if ($(this).val().length == 0)
                $(this).val(waterMark).addClass('watermark');
        }).focus(function () {
            if ($(this).val() == waterMark)
                $(this).val('').removeClass('watermark');
        }).val(waterMark).addClass('watermark');
    }
});

$('select.restrictedList').change(function () {
    $('#divWarning').hide();
    var temp = $(this).val();
    if (temp == 2 || temp == 0) {
        //$($("select.restrictionList")[$("select.restrictedList").index(this)]).val('');
        $($("select.restrictionList")[$("select.restrictedList").index(this)]).val(0);
        $($("select.restrictionList")[$("select.restrictedList").index(this)]).attr("disabled", true);
        $($("select.consentList")[$("select.restrictedList").index(this)]).val(0);
        $($("select.consentList")[$("select.restrictedList").index(this)]).attr("disabled", true);
        $($("input.HoldBack")[$("select.restrictedList").index(this)]).val("");
        $($("input.HoldBack")[$("select.restrictedList").index(this)]).attr("disabled", true);
    }
    else if (temp == 111) {
        $($("select.restrictionList")[$("select.restrictedList").index(this)]).val(111);
        $($("select.restrictionList")[$("select.restrictedList").index(this)]).attr("disabled", true);
        $($("select.consentList")[$("select.restrictedList").index(this)]).val(111);
        $($("select.consentList")[$("select.restrictedList").index(this)]).attr("disabled", true);
        $($("input.HoldBack")[$("select.restrictedList").index(this)]).val("No Change Required");
        $($("input.HoldBack")[$("select.restrictedList").index(this)]).attr("disabled", true);
    }
    else {
        $($("select.restrictionList")[$("select.restrictedList").index(this)]).removeAttr("disabled");
        $($("select.consentList")[$("select.restrictedList").index(this)]).removeAttr("disabled");
        $($("input.HoldBack")[$("select.restrictedList").index(this)]).removeAttr("disabled");
    }
});

/*Restriction list dropdown validation functionality Ends*/


$('select.restrictionList').each(function () {
    var temp = $(this).val();

    if (temp == 1 || temp == 3 || temp == 4 || temp == 0 || temp == 111) {
        $($("select.consentList")[$("select.restrictionList").index(this)]).attr("disabled", true);
    }
    else {
        $($("select.consentList")[$("select.restrictionList").index(this)]).attr("disabled", false);
        $($("select.consentList")[$("select.restrictionList").index(this)]).blur(function () {
            if ($(this).val().length == 0)
                $(this).val(waterMark).addClass('watermark');
        }).focus(function () {
            if ($(this).val() == waterMark)
                $(this).val('').removeClass('watermark');
        }).val(waterMark).addClass('watermark');

    }
});


//button Apply Changes
$("#btnApplySecondaryBulkEdit").click(function () {
    if (validateSecondaryExploitationBulkEditPopup()) {
        if (checkStatusBulkConfirmation == "true") {
            updateSecondaryBulkEdit();
        }
        else {
            $("#divConfirmDialog").dialog('open');
            $("#divConfirmDialog").dialog({ title: 'Bulk-Edit Confirmation', buttons: {
                'Yes':
        function () {
            if ($("#chkFutureMsg").is(":checked")) {
                checkStatusBulkConfirmation = "true";
            }
            $("#divConfirmDialog").dialog('close');
            updateSecondaryBulkEdit();
        },
                'Cancel':
         function () {
             $("#divConfirmDialog").dialog('close');
         }
            }
            });
        }
        setTimeout(function () { resetAllData(); }, 500);
    }
});

//button re-set rights acquired
$('#btnResetSecondaryBulkEdit').click(function () {
    $('#divWarning').hide();
    $('select.restrictedList').each(function () {
        $(this).val("111"); //No value to be selected
    });

    $('select.restrictionList').each(function () {
        $(this).val("111"); //Select value has to be selected 
    });

    $('select.consentList').each(function () {
        $(this).val("111"); //Select value has to be selected 
    });

    $('.accSecondaryBody input:text').each(function () {
        $(this).blur(function () {
            if ($(this).val().length == 0)
                $(this).val(waterMark).addClass('watermark');
        }).focus(function () {
            if ($(this).val() == waterMark)
                $(this).val('').removeClass('watermark');
        }).val(waterMark).addClass('watermark');
    });
    $('#ddlreviewStatus').val(0);
    restrictedDropDownValidation();

    $('.HoldBack').blur(function () {
        if ($(this).val().length == 0)
            $(this).val(waterMark).addClass('watermark');
    }).focus(function () {
        if ($(this).val() == waterMark)
            $(this).val('').removeClass('watermark');
    }).val(waterMark).addClass('watermark');
});
  
//button cancel
$('#btnCancelSecondaryBulkEdit').click(function () {
    $('.divobjBulkEditSecondaryPopUp').dialog('close');
});


//Apply all click confirmation dialog for Bulk Edit
var pcDialog = $('<div id="divConfirmDialog"></div>')
                .dialog({
                    autoOpen: false,
                    modal: true,
                    title: '',
                    show: 'clip',
                    hide: 'clip',
                    width: 500,
                    resize: false
                });
                pcDialog.html("<div style='padding: 10px;'><div class='resourceInfoHeader' style='float:left;margin-top:13px;height:20px;'></div><p>Please confirm that you want to apply these changes to all the selected Repertoire</p></div><div style='padding:0px 5px 0px 10px;float:left'><input type='checkbox' id='chkFutureMsg'></div><div style='float:left;margin-top:3px'>Don't show this message in future</div>");

// update function
function updateSecondaryBulkEdit() {
    var secondaryGridDatas = gridObjSecondary.get_SelectedRecords();
        saveNoRightsData();
        var jsonData = getSecondaryExploitationData();
        jsonObject = JSON.stringify(jsonData);
        getSelectedValues();
        appendAllData();
        for (var gridDataIndex = 0; gridDataIndex < secondaryGridDatas.length; gridDataIndex++) {
            var colObj = secondaryGridDatas[gridDataIndex];
            tempRightsId = colObj.RightSetId;
            updatedSecondaryGridValues(colObj);
            currentSecondaryGridItems(tempRightsId);
        }
   
        gridObjSecondary._edit._isEdit = true;
        $('.divobjBulkEditSecondaryPopUp').dialog('close');
}

/*Save Validation Check*/
function validateSecondaryExploitationBulkEditPopup() {
    var result = true;
    var restrictedList = $("select.restrictedList");
    for (var i = 0; i < $(restrictedList).length; i++) {
        var tempRestricted = $($(restrictedList)[i]).val();
        if (tempRestricted == 1) {
            var restriction = $($('select.restrictionList')[i]).val();
            if (restriction == 0 || restriction == 111) {
                $('#divWarning').show();
                $('.divWarningContainer').show();
                $('#divSecondaryError').html("Please select a valid Restrictions value where Restricted is set to "Yes" ");
                result = false;
                return false;
            }
        }
        //return true;
    }
    $("select.restrictionList").each(function () {
        var temp = $(this).val();
        if (temp == 2 || temp == 5) {
            var item = $($("select.consentList")[$("select.restrictionList").index(this)]);
            if (item.val() == 111 || item.val() == 0) {
                $('#divWarning').show();
                $('.divWarningContainer').show();
                $('#divSecondaryError').html(secondaryPopupMessages.exploitPeriod);
                result = false;
                return false;
            }
        }
        return true;
    });

    if (result == true) {

        $("select.consentList").each(function () {
            var temp = $(this).val();
            if (temp == 1) {
                var item = $($("input.HoldBack")[$("select.consentList").index(this)]);
                if (item.val() == "" || item.val() == "No Change Required") {
                    $('#divWarning').show();
                    $('.divWarningContainer').show();
                    $('#divSecondaryError').html(secondaryPopupMessages.exploitHoldPeriod);
                    result = false;
                    return false;
                }
            }
            return true;
        });
    }
    return result;
}

 /*Sets True if No Rights*/
    function fillExploitationNorightsData(index) {
        switch (index) {
            case 1:
                rightsMulti_Artist_Compilations = "true";
                break;
            case 2:
                rightsSynchronisation = "true";
                break;
            case 3:
                rightsMidPrice = "true";
                break;
            case 4:
                rightsBudget = "true";
                break;
            case 5:
                rightsPremiums = "true";
                break;
            case 6:
                rightssample_Use = "true";
                break;
            case 7:
                rightsAdvert_Royalty_Breaks = "true";
                break;
            case 8:
                rightsClub_Mail_Order = "true";
                break;
            case 9:
                rightsRemix_Edit = "true";
                break;
            case 10:
                rightsGreatest_Hits = "true";
                break;
            case 11:
                rightsKiosk = "true";
                break;
        }
    }

/*To save the NoRights Info*/
function saveNoRightsData() {
    var exploitationcount = 0;
    $("select.restrictionList").each(function () {
        exploitationcount++;
        var temp = $(this).val();
        if (temp == 1) {//No Rights
            fillExploitationNorightsData(exploitationcount);
        }
    });
}

function getSecondaryExploitationData() {
    var secondaryTableData = $('.accSecondaryBody').find('tr');
    var arraySecondaryData = new Array();
//    var count = 0;
    for (var rowIndex = 1; rowIndex < secondaryTableData.length; rowIndex++) {
        var jsonData = getJsonData(secondaryTableData[rowIndex]);
        arraySecondaryData.push(jsonData); 
    }
//    $(secondaryTableData).each(function () {
//        if (count > 0) {
//            var jsonData = getJsonData(this);
//            arraySecondaryData.push(jsonData);
//        }
//        count++;
//    });
    return arraySecondaryData;
}


function getJsonData(data) {
    var isRestricted = false, restrictionListId, consentListId, holdBack, notes, exploitationTypeId;
    var secondaryRowData = data;
    var count = 1;
    $(secondaryRowData).find('select').each(function () {
        switch (count) {
            case 1: //RestrictionId (YES,NO)
                isRestricted = $(this).val();
                if (isRestricted.toLocaleLowerCase() == 1) {
                    isRestricted = true;
                } else {
                    isRestricted = false;
                }
                break;
            case 2: //RestrictionOption
                restrictionListId = $(this).val();
                break;
            case 3: //ConsentPeriod
                consentListId = $(this).val();
                break;
        }
        count++;
    });
    var textCount = 1;
    $(secondaryRowData).find(':text').each(function () {
        switch (textCount) {
            case 1:
                if ($(this).val() != "No Change Required") {
                    holdBack = $(this).val();
                }
                break;
            case 2:
                if ($(this).val() != "No Change Required") {
                    notes = $(this).val();
                }
                break;
            default:
        }
        textCount++;
    });
    $(secondaryRowData).find('input:hidden').each(function () {
        exploitationTypeId = $(this).val();
    });
    return { ExploitationTypeId: exploitationTypeId, IsRestriction: isRestricted, RestrictionTypeId: restrictionListId, ConsentPeriodTypeId: consentListId, HoldBackPeriod: holdBack, Notes: notes };
}


/*Get Selected Values to append*/
function getSelectedValues() {
    var count = 0;
    var restrictedList = $('.restrictedList');
//    $('.restrictedList').each(function () {
        for (var listIndex = 0; listIndex < restrictedList.length; listIndex++) {
      
        switch (count) {
             case 0:
             if ($(restrictedList[listIndex]).find(':selected').text() != "No Change Required") {
                    if ($(restrictedList[listIndex]).find(':selected').text() == "Yes") {
                        if (window.rightsMulti_Artist_Compilations == "true") {
                            multi_Artist_Compilations = "No Rights";
                        } else {
                            multi_Artist_Compilations = "Y";
                        }
                    } else if ($(restrictedList[listIndex]).find(':selected').text() == "No") {
                        multi_Artist_Compilations = "N";
                    }
                }
                else
                {
                multi_Artist_Compilations = "No Change Required";
                }
                break;
            case 1:
                 if ($(restrictedList[listIndex]).find(':selected').text() != "No Change Required") {
                    if ($(restrictedList[listIndex]).find(':selected').text() == "Yes") {

                        if (window.rightsSynchronisation == "true") {
                            synchronisation = "No Rights";
                        } else {
                            synchronisation = "Y";
                        }
                    } else if ($(restrictedList[listIndex]).find(':selected').text() == "No") {
                        synchronisation = "N";
                    }
                }
                else
                {
                synchronisation = "No Change Required";
                }
                break;
            case 2:
                if ($(restrictedList[listIndex]).find(':selected').text() != "No Change Required") {
                    if ($(restrictedList[listIndex]).find(':selected').text() == "Yes") {
                        if (window.rightsMidPrice == "true") {
                            midPrice = "No Rights";
                        } else {
                            midPrice = "Y";
                        }
                    } else if ($(restrictedList[listIndex]).find(':selected').text() == "No") {
                        midPrice = "N";
                    }
                }
                 else
                {
                midPrice = "No Change Required";
                }
                break;
            case 3:
                if ($(restrictedList[listIndex]).find(':selected').text() != "No Change Required") {
                    if ($(restrictedList[listIndex]).find(':selected').text() == "Yes") {
                        if (window.rightsBudget == "true") {
                            budget = "No Rights";
                        } else {
                            budget = "Y";
                        }
                    } else if ($(restrictedList[listIndex]).find(':selected').text() == "No") {
                        budget = "N";
                    }
                }
                 else
                {
                budget = "No Change Required";
                }
                break;
            case 4:
                if ($(restrictedList[listIndex]).find(':selected').text() != "No Change Required") {
                    if ($(restrictedList[listIndex]).find(':selected').text() == "Yes") {
                        if (window.rightsPremiums == "true") {
                            premiums = "No Rights";
                        } else {
                            premiums = "Y";
                        }
                    } else if ($(restrictedList[listIndex]).find(':selected').text() == "No") {
                        premiums = "N";
                    }
                }
                 else
                {
                premiums = "No Change Required";
                }
                break;
            case 5:
                if ($(restrictedList[listIndex]).find(':selected').text() != "No Change Required") {
                    if ($(restrictedList[listIndex]).find(':selected').text() == "Yes") {
                        if (window.rightssample_Use == "true") {
                            sampleUse = "No Rights";
                        } else {
                            sampleUse = "Y";
                        }
                    } else if ($(restrictedList[listIndex]).find(':selected').text() == "No") {
                        sampleUse = "N";
                    }
                }
                 else
                {
                sampleUse = "No Change Required";
                }
                break;
            case 6:
                if ($(restrictedList[listIndex]).find(':selected').text() != "No Change Required") {
                    if ($(restrictedList[listIndex]).find(':selected').text() == "Yes") {
                        if (window.rightsAdvert_Royalty_Breaks == "true") {
                            advertRoyaltyBreaks = "No Rights";
                        } else {
                            advertRoyaltyBreaks = "Y";
                        }
                    } else if ($(restrictedList[listIndex]).find(':selected').text() == "No") {
                        advertRoyaltyBreaks = "N";
                    }
                }
                 else
                {
                advertRoyaltyBreaks = "No Change Required";
                }
                break;
            case 7:
                if ($(restrictedList[listIndex]).find(':selected').text() != "No Change Required") {
                    if ($(restrictedList[listIndex]).find(':selected').text() == "Yes") {
                        if (window.rightsClub_Mail_Order == "true") {
                            clubMailOrder = "No Rights";
                        } else {
                            clubMailOrder = "Y";
                        }
                    } else if ($(restrictedList[listIndex]).find(':selected').text() == "No") {
                        clubMailOrder = "N";
                    }
                }
                 else
                {
                clubMailOrder = "No Change Required";
                }
                break;
            case 8:
                if ($(restrictedList[listIndex]).find(':selected').text() != "No Change Required") {
                    if ($(restrictedList[listIndex]).find(':selected').text() == "Yes") {
                        if (window.rightsRemix_Edit == "true") {
                            remixEdit = "No Rights";
                        } else {
                            remixEdit = "Y";
                        }
                    } else if ($(restrictedList[listIndex]).find(':selected').text() == "No") {
                        remixEdit = "N";
                    }
                }
                 else
                {
                remixEdit = "No Change Required";
                }
                break;
            case 9:
                if ($(restrictedList[listIndex]).find(':selected').text() != "No Change Required") {
                    if ($(restrictedList[listIndex]).find(':selected').text() == "Yes") {
                        if (window.rightsGreatest_Hits == "true") {
                            greatestHits = "No Rights";
                        } else {
                            greatestHits = "Y";
                        }
                    } else if ($(restrictedList[listIndex]).find(':selected').text() == "No") {
                        greatestHits = "N";
                    }
                }
                 else
                {
                greatestHits = "No Change Required";
                }
                break;
            case 10:
                if ($(restrictedList[listIndex]).find(':selected').text() != "No Change Required") {
                    if ($(restrictedList[listIndex]).find(':selected').text() == "Yes") {
                        if (window.rightsKiosk == "true") {
                            kiosk = "No Rights";
                        } else {
                            kiosk = "Y";
                        }
                    } else if ($(restrictedList[listIndex]).find(':selected').text() == "No") {
                        kiosk = "N";
                    }
                }
                 else
                {
                kiosk = "No Change Required";
                }
                break;
          }
        count++;
    }
    reviewStatus = $('#ddlreviewStatus').find(":selected").text();
}

/*Appends Data */
function appendAllData() {
    var checkboxes = $("#"+secondarygridId).find(".GridContent #secondarychkChild");
//    $.each(checkboxes, function (index, checkbox) {
        for (var chkBoxIndex = 0; chkBoxIndex < checkboxes.length; chkBoxIndex++) {
            if (checkboxes[chkBoxIndex].checked) {
                var row = gridObjSecondary.get_ContentTable().getElementsByTagName("tr")[chkBoxIndex];
                appendSecondaryData(row);
            }
        }
//        if (checkbox.checked) {

//                }
//     });
}

function updatedSecondaryGridValues(colObj) {
    if (colObj.RightsEditPermitted != "N") {
        if (multi_Artist_Compilations != "No Change Required")
            colObj.IsMACRestrictedLnr = multi_Artist_Compilations;
        if (synchronisation != "No Change Required")
            colObj.IsSyncronizationRestrictedLnr = synchronisation;
        if (midPrice != "No Change Required")
            colObj.IsMidPriceRestrictedLnr = midPrice;
        if (budget != "No Change Required")
            colObj.IsBudgetRestrictedLnr = budget;
        if (premiums != "No Change Required")
            colObj.IsPremiumRestrictedLnr = premiums;
        if (sampleUse != "No Change Required")
            colObj.IsSampleRestrictedLnr = sampleUse;
        if (advertRoyaltyBreaks != "No Change Required")
            colObj.IsRoyaltyBreakRestrictedLnr = advertRoyaltyBreaks;
        if (clubMailOrder != "No Change Required")
            colObj.IsClubOrderRestrictedLnr = clubMailOrder;
        if (remixEdit != "No Change Required")
            colObj.IsRemixestrictedLnr = remixEdit;
        if (greatestHits != "No Change Required")
            colObj.IsGreatestHitsRestrictedLnr = greatestHits;
        if (kiosk != "No Change Required")
            colObj.IsKioskRestrictedLnr = kiosk;
        if (jsonObject != "")
            colObj.JsonStringDatas = jsonObject;
    }
    if (colObj.ReviewStatusPermitted != "N") {
        if (reviewStatus != "No Change Required")
            colObj.ReviewStatusLnr = reviewStatus;
    }
}


/*Appends Data to Grid*/
function currentSecondaryGridItems(tempId) {
    var secondaryDatas = gridObjSecondary._edit._data;
    var length = secondaryDatas.length;
    var replaceObj = false;
    for (var x = 0; x <length ; x++) {
        if (secondaryDatas[x].RightSetId == tempId) {
            if (secondaryDatas[x].RightsEditPermitted != "N") {
                if (multi_Artist_Compilations != "No Change Required")
                    secondaryDatas[x].IsMACRestrictedLnr = multi_Artist_Compilations;
                if (synchronisation != "No Change Required")
                    secondaryDatas[x].IsSyncronizationRestrictedLnr = synchronisation;
                if (midPrice != "No Change Required")
                    secondaryDatas[x].IsMidPriceRestrictedLnr = midPrice;
                if (budget != "No Change Required")
                    secondaryDatas[x].IsBudgetRestrictedLnr = budget;
                if (premiums != "No Change Required")
                    secondaryDatas[x].IsPremiumRestrictedLnr = premiums;
                if (sampleUse != "No Change Required")
                    secondaryDatas[x].IsSampleRestrictedLnr = sampleUse;
                if (advertRoyaltyBreaks != "No Change Required")
                    secondaryDatas[x].IsRoyaltyBreakRestrictedLnr = advertRoyaltyBreaks;
                if (clubMailOrder != "No Change Required")
                    secondaryDatas[x].IsClubOrderRestrictedLnr = clubMailOrder;
                if (remixEdit != "No Change Required")
                    secondaryDatas[x].IsRemixestrictedLnr = remixEdit;
                if (greatestHits != "No Change Required")
                    secondaryDatas[x].IsGreatestHitsRestrictedLnr = greatestHits;
                if (kiosk != "No Change Requiredv")
                    secondaryDatas[x].IsKioskRestrictedLnr = kiosk;
                if (jsonObject != "")
                    secondaryDatas[x].JsonStringDatas = jsonObject;
            }
            if (secondaryDatas[x].ReviewStatusPermitted != "N") {
                if (reviewStatus != "No Change Required")
                    secondaryDatas[x].ReviewStatusLnr = reviewStatus;
            }
            if (!(secondaryDatas[x].RightsEditPermitted == "N") || !(secondaryDatas[x].ReviewStatusPermitted == "N")) {
                 if (gridObjSecondary._edit._updatedRecords.length > 0) {
                    for (var y = 0; y < gridObjSecondary._edit._updatedRecords.length; y++) {
                        if (gridObjSecondary._edit._updatedRecords[y].RightSetId == tempId) {
                            gridObjSecondary._edit._updatedRecords[y] = secondaryDatas[x];
                            replaceObj = true;
                        }
                    }
                }
                if (replaceObj == false)
                    gridObjSecondary._edit._updatedRecords.push(secondaryDatas[x]);
            }
        }
    }
    gridObjSecondary._edit._data = secondaryDatas;
}


/*Appends Data to Table*/
function appendSecondaryData(tr) {
    var appendtd = $(tr).find('td.tdIsMACRestrictedLnr');// children()[20];
    var appendtd0 = $(tr).find('td.tdIsSyncronizationRestrictedLnr'); // $(tr).children()[21];
    var appendtd1 = $(tr).find('td.tdIsMidPriceRestrictedLnr'); // $(tr).children()[22];
    var appendtd2 = $(tr).find('td.tdIsBudgetRestrictedLnr'); // $(tr).children()[23];
    var appendtd3 = $(tr).find('td.tdIsPremiumRestrictedLnr'); // $(tr).children()[24];
    var appendtd4 = $(tr).find('td.tdIsSampleRestrictedLnr'); // $(tr).children()[25];
    var appendtd5 = $(tr).find('td.tdIsRoyaltyBreakRestrictedLnr'); // $(tr).children()[26];
    var appendtd6 = $(tr).find('td.tdIsClubOrderRestrictedLnr'); // $(tr).children()[27];
    var appendtd7 = $(tr).find('td.tdIsRemixestrictedLnr'); // $(tr).children()[28];
    var appendtd8 = $(tr).find('td.tdIsGreatestHitsRestrictedLnr') ; // $(tr).children()[29];
    var appendtd9 = $(tr).find('td.tdExploitations'); // $(tr).children()[30];
    var appendtd10 = $(tr).find('td.tdJsonStringDatas'); // $(tr).children()[32];
    var appendtd11 = $(tr).find('td.tdReviewStatusLnr');// $(tr).children()[4];
    var isReviewEdit = $(tr).find('td.tdReviewStatusPermitted').text();//.children()[35].innerHTML;
    var isRightsEdit = $(tr).find('td.tdRightsEditPermitted').text(); //$(tr).children()[36].innerHTML;
    if (isRightsEdit != "N") {
        if (multi_Artist_Compilations != "No Change Required") {
            $(appendtd).html(multi_Artist_Compilations);
            $(appendtd).addClass("updatedCell");
        }
        if (synchronisation != "No Change Required") {
            $(appendtd0).html(synchronisation);
            $(appendtd0).addClass("updatedCell");
        }
        if (midPrice != "No Change Required") {
            $(appendtd1).html(midPrice);
            $(appendtd1).addClass("updatedCell");
        }
        if (budget != "No Change Required") {
            $(appendtd2).html(budget);
            $(appendtd2).addClass("updatedCell");
        }
        if (premiums != "No Change Required") {
            $(appendtd3).html(premiums);
            $(appendtd3).addClass("updatedCell");
        }
        if (sampleUse != "No Change Required") {
            $(appendtd4).html(sampleUse);
            $(appendtd4).addClass("updatedCell");
        }
        if (advertRoyaltyBreaks != "No Change Required") {
            $(appendtd5).html(advertRoyaltyBreaks);
            $(appendtd5).addClass("updatedCell");
        }
        if (clubMailOrder != "No Change Required") {
            $(appendtd6).html(clubMailOrder);
            $(appendtd6).addClass("updatedCell");
        }
        if (remixEdit != "No Change Required") {
            $(appendtd7).html(remixEdit);
            $(appendtd7).addClass("updatedCell");
        }
        if (greatestHits != "No Change Required") {
            $(appendtd8).html(greatestHits);
            $(appendtd8).addClass("updatedCell");
        }
        if (kiosk != "No Change Required") {
            $(appendtd9).html(kiosk);
            $(appendtd9).addClass("updatedCell");
        }
        if (jsonObject != "") {
            $(appendtd10).html(jsonObject);
        }
        }
        if(isReviewEdit != "N")
        {
            if (reviewStatus != "No Change Required") {
            $(appendtd11).html('');
            $(appendtd11).addClass("reviewFlagGreenUpdated");
            $(appendtd11).attr('title', 'Final');
            $(appendtd11).tooltip();
        }
    }
}


function restrictedDropDownValidation() {
    $("select.restrictedList").each(function () {
        $($("select.restrictedList")[$("select.restrictedList").index(this) + 1]).val($(this).val());
        var temp = $($("select.restrictedList")[$("select.restrictedList").index(this)]).val();
        if (temp == 0 || temp == 111) {
            //$($("select.restrictionList")[$("select.restrictedList").index(this)]).val(4);
            $($("select.restrictionList")[$("select.restrictedList").index(this)]).val(111);
            $($("select.restrictionList")[$("select.restrictedList").index(this)]).attr("disabled", true);
            $($("select.consentList")[$("select.restrictedList").index(this)]).val(111);
            $($("select.consentList")[$("select.restrictedList").index(this)]).attr("disabled", true);
            $($("input.HoldBack")[$("select.restrictedList").index(this)]).val("No Change Required");
            $($("input.HoldBack")[$("select.restrictedList").index(this)]).attr("disabled", true);
        }
        else if (temp == 2) {
            $($("select.restrictionList")[$("select.restrictedList").index(this)]).val(0);
            $($("select.restrictionList")[$("select.restrictedList").index(this)]).attr("disabled", true);
            $($("select.consentList")[$("select.restrictedList").index(this)]).val(0);
            $($("select.consentList")[$("select.restrictedList").index(this)]).attr("disabled", true);
            $($("input.HoldBack")[$("select.restrictedList").index(this)]).val("");
            $($("input.HoldBack")[$("select.restrictedList").index(this)]).attr("disabled", true);
        }
        else {
            var temp1 = $($("select.restrictionList")[$("select.restrictedList").index(this)]).val();
            if (temp1 == 1 || temp1 == 3) {
                $($("select.consentList")[$("select.restrictedList").index(this)]).attr("disabled", true);
                $($("input.HoldBack")[$("select.restrictedList").index(this)]).attr("disabled", true);
            }
            else {
                $($("select.restrictionList")[$("select.restrictedList").index(this)]).removeAttr("disabled");
                $($("select.consentList")[$("select.restrictedList").index(this)]).removeAttr("disabled");
                $($("input.HoldBack")[$("select.restrictedList").index(this)]).removeAttr("disabled");
            }

        }
    });
      
}

function addWatermark(element) {
    $(element).blur(function () {
        if ($(this).val().length == 0)
            $(this).val(waterMark).addClass('watermark');
    }).focus(function () {
        if ($(this).val() == waterMark)
            $(this).val('').removeClass('watermark');
    }).val(waterMark).addClass('watermark');
}